<!DOCTYPE html>
<script>
    'use strict';

    function formatDate(date)
    {
        let now = new Date();
        let diff = Math.round((now - date) / 1000);
        if(diff < 1)
        {
            return "right now";
        }
        else if(diff < 60)
        {
            return `${diff} sec. ago`;
        }
        else if(diff < 3600)
        {
            return `${diff / 60} min. ago`;
        }
        else
        {
            //return `${date.getDate()}.${date.getMonth()}.${date.getFullYear().toString().slice(2)} ${date.getHours()}:${date.getMinutes()}`;
            let d = date;
            d =
            [
                '0' + d.getDate(),
                '0' + d.getMonth(),
                '' + d.getFullYear(),
                '0' + d.getHours(),
                '0' + d.getMinutes()
            ].map(item => item.slice(-2));

            return d.slice(0, 3).join('.') + " " + d.slice(3).join(":");
        }
    }

    alert(formatDate(new Date(new Date - 1)));
    alert(formatDate(new Date(new Date - 30 * 1000)));
    alert(formatDate(new Date(new Date - 5 * 60 * 1000)));
    alert(formatDate(new Date(new Date - 86400 * 1000)));
</script>